v 0.4

---

# Signets

#B3

---

# Mise en place

- Un serveur SSH
- Le serveur SSH doit disposer d'un utilisateur **dont le nom est connu**

---

# Pré requis

- Notion de l’attaque Force brute [ 0 - Brute Force - Généralités](:/5628a6fb819c44d4987e4d33b04ef0e4)
- Dictionnaire
- SSH

---

# Activité 1 - Exécuter le code

Exécuter le code python suivant sur la machine qui va tenter la connexion SSH sur une autre machine.

```python
import paramiko
# https://www.paramiko.org/

# Infos
host="172.16.XX.254"
username="user1"
password="user1"
port=2222

pirate=False

try:
	# Connexion
	client = paramiko.client.SSHClient()
	client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
	client.connect(host, username=username, password=password, port=port)
	pirate=True

except:
	pirate=False
	client.close()

if pirate:
	command = "tail /etc/passwd" # On peut voir la liste des utilisateurs sur la machine
	_stdin, _stdout, _stderr = client.exec_command(command)
	print ("Sortie")
	print( _stdout.read().decode() )

client.close()
```

(les 3 valeurs pour **host**, **username**, **password** seront fournies).

---

# Activité 2 - Modifier le code

Il y a l’utilisateur **userfaible** sur la machine **172.16.XX.XX**.

Proposer une solution pour que l’*utilisateur/pirate* saisisse la valeur **password** pour tenter de pirater le compte **userfaible**.

Le programme doit dire si le mot de passe est correct ou incorrect.

---

# Activité 3 - Lire un fichier externe

-	Créer le fichier texte **file.txt** dont le contenu est:
```txt
Bonjour
Hello
Azerty
password
```

- Exécuter le code Python suivant:
```python
# Ouvrir le fichier en lecture seule
file = open("file.txt", "r")

# Utiliser readlines pour lire les lignes du fichier
# La variable "lignes" est une liste contenant toutes les lignes du fichier
lines = file.readlines()

# Fermer le fichier après avoir lu les lignes
file.close()

# Itérer sur les lignes
for line in lines:
    print (line.strip())    # Juste pour le test # Stip pour enlever le saut de ligne
```
 
> Que fait ce code ?

---

# Activité 4 - Rassembler les fonctionnalités

> Préparer un fichier texte avec des mots de passe populaires.

> Faire un programme Python afin de faire une attaque sur le mot de passe de l’utilisateur *userfaible*, en utilisant ce fichier.